<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dot1Xer Supreme Configurator</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    body { font-family: Arial, sans-serif; background: #f0f4f8; color: #333; margin: 0; padding: 0; }
    header { background: #2c3e50; color: white; padding: 1em; text-align: center; }
    .top-tabs { background: #34495e; padding: 0.5em; }
    .tab-btn { background: #465c71; color: white; border: none; padding: 0.8em 1.5em; margin: 0 0.2em; cursor: pointer; }
    .tab-btn.active { background: #1abc9c; }
    .sub-tabs { background: #ecf0f1; padding: 0.5em; }
    .sub-tab-btn { background: #bdc3c7; color: #333; border: none; padding: 0.6em 1em; margin: 0 0.2em; cursor: pointer; }
    .sub-tab-btn.active { background: #3498db; color: white; }
    .tab-content { padding: 1em; display: none; }
    .tab-content.active { display: block; }
    .accordion { margin: 0.5em 0; }
    .accordion-header { background: #3498db; color: white; padding: 0.8em; cursor: pointer; display: flex; justify-content: space-between; }
    .accordion-content { background: #fff; padding: 1em; display: none; border: 1px solid #ddd; }
    .accordion-content.active { display: block; }
    .form-group { margin: 0.5em 0; }
    select, input, textarea { width: 100%; padding: 0.5em; margin: 0.3em 0; }
    .nav-buttons button { background: #1abc9c; color: white; border: none; padding: 0.8em 1.5em; margin: 0.5em; cursor: pointer; }
    .config-output { background: #fff; padding: 1em; border: 1px solid #ddd; }
    .ai-chat-container { background: #fff; padding: 1em; border: 1px solid #ddd; }
    .chat-history { max-height: 400px; overflow-y: auto; }
    .ai-message, .user-message { margin: 0.5em 0; display: flex; }
    .message-avatar img { width: 40px; height: 40px; margin-right: 0.5em; }
    .message-content { background: #ecf0f1; padding: 0.5em; border-radius: 5px; }
    .ai-message .message-content { background: #1abc9c; color: white; }
    .error-message { color: #e74c3c; }
    .row { display: flex; justify-content: space-between; }
    .col { flex: 1; margin: 0 0.5em; }
    .checkbox-group { margin: 0.5em 0; }
    .banner-container { text-align: center; margin: 1em 0; }
    .banner-image { max-width: 100%; height: auto; }
    .step-indicator { display: flex; justify-content: space-between; margin: 1em 0; }
    .step { background: #bdc3c7; color: #333; padding: 0.5em 1em; cursor: pointer; }
    .step.active { background: #3498db; color: white; }
    .tab-control { margin: 0.5em 0; }
    .tab-control-btn { background: #bdc3c7; color: #333; border: none; padding: 0.6em 1em; margin: 0 0.2em; cursor: pointer; }
    .tab-control-btn.active { background: #3498db; color: white; }
    .server-tab { display: none; }
    .server-tab.active { display: block; }
  </style>
</head>
<body>
  <header>
    <div class="logo-container">
      <img src="assets/icons/logo.png" alt="Dot1Xer Supreme Logo" class="logo">
    </div>
    <h1 class="title">Dot1Xer Supreme Configurator</h1>
  </header>

  <!-- Top Navigation Tabs -->
  <nav class="top-tabs">
    <button class="tab-btn active" onclick="showTab('configurator')">Configurator</button>
    <button class="tab-btn" onclick="showTab('ai')">AI Integration</button>
    <button class="tab-btn" onclick="showTab('reference')">Reference Architecture</button>
    <button class="tab-btn" onclick="showTab('discovery')">Network Discovery</button>
    <button class="tab-btn" onclick="showTab('help')">Help</button>
  </nav>

  <!-- Banner Image -->
  <div class="banner-container">
    <img src="assets/icons/banner.jpg" alt="Dot1Xer Supreme Banner" class="banner-image">
  </div>

  <!-- Configurator Tab -->
  <div class="tab-content active" id="configurator">
    <h2>Configurator</h2>
    <div class="step-indicator">
      <div class="step active" data-step="1" onclick="goToStep(1)">Platform</div>
      <div class="step" data-step="2" onclick="goToStep(2)">Authentication</div>
      <div class="step" data-step="3" onclick="goToStep(3)">Servers</div>
      <div class="step" data-step="4" onclick="goToStep(4)">VLANs</div>
      <div class="step" data-step="5" onclick="goToStep(5)">Advanced</div>
      <div class="step" data-step="6" onclick="goToStep(6)">Preview</div>
    </div>

    <div id="error-message" class="error-message" style="display: none;"></div>

    <!-- Step 1: Platform Selection -->
    <div class="step-content" id="step-1">
      <h3>Step 1: Platform Selection</h3>
      <div class="form-group">
        <label for="vendor-select">Vendor:</label>
        <select id="vendor-select" name="vendor" onchange="updatePlatformOptions()">
          <option value="cisco">Cisco</option>
          <option value="aruba">Aruba (HPE)</option>
          <option value="juniper">Juniper</option>
          <option value="fortinet">Fortinet</option>
          <option value="arista">Arista</option>
          <option value="extreme">Extreme Networks</option>
          <option value="huawei">Huawei</option>
          <option value="alcatel">Alcatel-Lucent</option>
          <option value="ubiquiti">Ubiquiti</option>
          <option value="hp">HP (ProCurve)</option>
          <option value="dell">Dell (PowerSwitch)</option>
          <option value="netgear">NETGEAR</option>
          <option value="ruckus">Ruckus (CommScope)</option>
          <option value="brocade">Brocade (Ruckus)</option>
        </select>
      </div>
      <div class="form-group">
        <label for="platform-select">Platform:</label>
        <select id="platform-select" name="platform"></select>
      </div>
      <div class="nav-buttons">
        <button type="button" onclick="goToStep(2)">Next</button>
      </div>
    </div>

    <!-- Step 2: Authentication Method -->
    <div class="step-content" id="step-2" style="display: none;">
      <h3>Step 2: Authentication Method</h3>
      <div class="form-group">
        <label for="auth-method">Authentication Method:</label>
        <select id="auth-method" name="auth_method">
          <option value="dot1x-mab">802.1X with MAB Fallback</option>
          <option value="concurrent">802.1X and MAB Concurrent</option>
          <option value="dot1x-only">802.1X Only</option>
          <option value="mab-only">MAC Authentication Only</option>
        </select>
      </div>
      <div class="form-group">
        <label>Authentication Mode:</label>
        <input type="radio" name="auth_mode" value="closed" checked> Closed
        <input type="radio" name="auth_mode" value="open"> Open
      </div>
      <div class="form-group">
        <label for="host-mode">Host Mode:</label>
        <select id="host-mode" name="host_mode">
          <option value="single-host">Single Host</option>
          <option value="multi-auth">Multi-Auth</option>
          <option value="multi-domain">Multi-Domain</option>
          <option value="multi-host">Multi-Host</option>
        </select>
      </div>
      <div class="nav-buttons">
        <button type="button" onclick="goToStep(1)">Previous</button>
        <button type="button" onclick="goToStep(3)">Next</button>
      </div>
    </div>

    <!-- Step 3: Server Configuration -->
    <div class="step-content" id="step-3" style="display: none;">
      <h3>Step 3: Server Configuration</h3>
      <div class="tab-control">
        <button class="tab-control-btn active" onclick="showServerTab('radius-tab')">RADIUS</button>
        <button class="tab-control-btn" onclick="showServerTab('tacacs-tab')">TACACS+</button>
        <button class="tab-control-btn" onclick="showServerTab('radsec-tab')">RadSec</button>
      </div>

      <!-- RADIUS Tab -->
      <div class="server-tab active" id="radius-tab">
        <h4>RADIUS Servers</h4>
        <div class="form-group">
          <label for="radius-server-group">Server Group Name:</label>
          <input type="text" id="radius-server-group" value="RADIUS-SERVERS">
          <div class="row">
            <div class="col">
              <label for="radius-ip-1">Primary Server IP:</label>
              <input type="text" id="radius-ip-1" placeholder="e.g., 10.1.1.100">
            </div>
            <div class="col">
              <label for="radius-key-1">Primary Shared Secret:</label>
              <input type="password" id="radius-key-1" placeholder="Shared secret">
            </div>
          </div>
          <div class="row">
            <div class="col">
              <label for="radius-ip-2">Secondary Server IP:</label>
              <input type="text" id="radius-ip-2" placeholder="e.g., 10.1.1.101">
            </div>
            <div class="col">
              <label for="radius-key-2">Secondary Shared Secret:</label>
              <input type="password" id="radius-key-2" placeholder="Shared secret">
            </div>
          </div>
        </div>
        <div class="accordion">
          <div class="accordion-header" onclick="toggleAccordion(this)">RADIUS Port Configuration<span>+</span></div>
          <div class="accordion-content">
            <div class="row">
              <div class="col">
                <label for="radius-auth-port">Authentication Port:</label>
                <input type="number" id="radius-auth-port" value="1812">
              </div>
              <div class="col">
                <label for="radius-acct-port">Accounting Port:</label>
                <input type="number" id="radius-acct-port" value="1813">
              </div>
            </div>
            <div class="col">
              <label for="radius-coa-port">CoA Port:</label>
              <input type="number" id="radius-coa-port" value="3799">
            </div>
          </div>
        </div>
        <div class="accordion">
          <div class="accordion-header" onclick="toggleAccordion(this)">RADIUS Timeout & Retransmit<span>+</span></div>
          <div class="accordion-content">
            <div class="row">
              <div class="col">
                <label for="radius-timeout">Timeout (seconds):</label>
                <input type="number" id="radius-timeout" value="5">
              </div>
              <div class="col">
                <label for="radius-retransmit">Retransmit Count:</label>
                <input type="number" id="radius-retransmit" value="3">
              </div>
            </div>
            <div class="row">
              <div class="col">
                <label for="radius-deadtime">Dead Time (minutes):</label>
                <input type="number" id="radius-deadtime" value="15">
              </div>
            </div>
          </div>
        </div>
        <div class="accordion">
          <div class="accordion-header" onclick="toggleAccordion(this)">Load Balancing Configuration<span>+</span></div>
          <div class="accordion-content">
            <div class="checkbox-group">
              <label><input type="checkbox" id="radius-load-balance"> Enable Load Balancing</label>
            </div>
            <div id="load-balance-options" style="display: none;">
              <label for="load-balance-method">Load Balance Method:</label>
              <select id="load-balance-method">
                <option value="least-outstanding">Least Outstanding</option>
                <option value="batch">Batch</option>
                <option value="simple">Simple Round-Robin</option>
              </select>
            </div>
          </div>
        </div>
        <div class="accordion">
          <div class="accordion-header" onclick="toggleAccordion(this)">Server Testing<span>+</span></div>
          <div class="accordion-content">
            <div class="checkbox-group">
              <label><input type="checkbox" id="radius-testing" checked> Enable Automated Server Testing</label>
            </div>
            <div id="testing-options">
              <label for="testing-username">Testing Username:</label>
              <input type="text" id="testing-username" value="radius-test">
            </div>
          </div>
        </div>
        <div class="accordion">
          <div class="accordion-header" onclick="toggleAccordion(this)">RADIUS Attributes<span>+</span></div>
          <div class="accordion-content">
            <div class="row">
              <div class="col">
                <div class="checkbox-group"><label><input type="checkbox" id="attr-nas-ip" checked> Include NAS-IP-Address (4)</label></div>
                <div class="checkbox-group"><label><input type="checkbox" id="attr-service-type" checked> Include Service-Type (6)</label></div>
              </div>
              <div class="col">
                <div class="checkbox-group"><label><input type="checkbox" id="attr-framed-mtu"> Include Framed-MTU (12)</label></div>
                <div class="checkbox-group"><label><input type="checkbox" id="attr-class" checked> Include Class (25)</label></div>
              </div>
            </div>
            <label for="mac-format">MAC Address Format:</label>
            <select id="mac-format">
              <option value="ietf">IETF (xx-xx-xx-xx-xx-xx)</option>
              <option value="cisco">Cisco (xxxx.xxxx.xxxx)</option>
              <option value="unformatted">Unformatted (xxxxxxxxxxxx)</option>
            </select>
            <div class="checkbox-group"><label><input type="checkbox" id="mac-case" checked> Use Uppercase for MAC Address</label></div>
          </div>
        </div>
      </div>

      <!-- TACACS+ Tab -->
      <div class="server-tab" id="tacacs-tab" style="display: none;">
        <h4>TACACS+ Servers</h4>
        <div class="form-group">
          <label for="tacacs-server-group">Server Group Name:</label>
          <input type="text" id="tacacs-server-group" value="TACACS-SERVERS">
          <div class="row">
            <div class="col">
              <label for="tacacs-ip-1">Primary Server IP:</label>
              <input type="text" id="tacacs-ip-1" placeholder="e.g., 10.1.1.102">
            </div>
            <div class="col">
              <label for="tacacs-key-1">Primary Shared Secret:</label>
              <input type="password" id="tacacs-key-1" placeholder="Shared secret">
            </div>
          </div>
          <div class="row">
            <div class="col">
              <label for="tacacs-ip-2">Secondary Server IP:</label>
              <input type="text" id="tacacs-ip-2" placeholder="e.g., 10.1.1.103">
            </div>
            <div class="col">
              <label for="tacacs-key-2">Secondary Shared Secret:</label>
              <input type="password" id="tacacs-key-2" placeholder="Shared secret">
            </div>
          </div>
        </div>
        <div class="accordion">
          <div class="accordion-header" onclick="toggleAccordion(this)">TACACS+ Options<span>+</span></div>
          <div class="accordion-content">
            <div class="row">
              <div class="col">
                <label for="tacacs-port">Port:</label>
                <input type="number" id="tacacs-port" value="49">
              </div>
              <div class="col">
                <label for="tacacs-timeout">Timeout (seconds):</label>
                <input type="number" id="tacacs-timeout" value="5">
              </div>
            </div>
            <div class="checkbox-group"><label><input type="checkbox" id="tacacs-single-connection"> Enable Single-Connection Mode</label></div>
            <div class="checkbox-group"><label><input type="checkbox" id="tacacs-directed-request"> Enable Directed-Request Mode</label></div>
          </div>
        </div>
      </div>

      <!-- RadSec Tab -->
      <div class="server-tab" id="radsec-tab" style="display: none;">
        <h4>RADIUS over TLS (RadSec)</h4>
        <div class="form-group">
          <div class="row">
            <div class="col">
              <label for="radsec-ip">Server IP:</label>
              <input type="text" id="radsec-ip" placeholder="e.g., 10.1.1.104">
            </div>
            <div class="col">
              <label for="radsec-key">Shared Secret:</label>
              <input type="password" id="radsec-key" placeholder="Shared secret">
            </div>
          </div>
          <div class="row">
            <div class="col">
              <label for="radsec-port">TLS Port:</label>
              <input type="number" id="radsec-port" value="2083">
            </div>
          </div>
        </div>
        <div class="accordion">
          <div class="accordion-header" onclick="toggleAccordion(this)">Certificate Configuration<span>+</span></div>
          <div class="accordion-content">
            <div class="row">
              <div class="col">
                <label for="client-trustpoint">Client Trustpoint:</label>
                <input type="text" id="client-trustpoint" placeholder="e.g., SWITCH-CERT">
              </div>
              <div class="col">
                <label for="server-trustpoint">Server Trustpoint:</label>
                <input type="text" id="server-trustpoint" placeholder="e.g., ISE-CERT">
              </div>
            </div>
            <div class="checkbox-group"><label><input type="checkbox" id="use-dtls"> Use DTLS instead of TLS</label></div>
          </div>
        </div>
      </div>

      <div class="nav-buttons">
        <button type="button" onclick="goToStep(2)">Previous</button>
        <button type="button" onclick="goToStep(4)">Next</button>
      </div>
    </div>

    <!-- Step 4: VLAN Configuration -->
    <div class="step-content" id="step-4" style="display: none;">
      <h3>Step 4: VLAN Configuration</h3>
      <div class="form-group">
        <label for="data-vlan">Data VLAN:</label>
        <input type="number" id="data-vlan" placeholder="e.g., 10" required>
        <label for="voice-vlan">Voice VLAN:</label>
        <input type="number" id="voice-vlan" placeholder="e.g., 20">
        <label for="guest-vlan">Guest VLAN:</label>
        <input type="number" id="guest-vlan" placeholder="e.g., 30">
        <label for="critical-vlan">Critical VLAN:</label>
        <input type="number" id="critical-vlan" placeholder="e.g., 40">
        <label for="auth-fail-vlan">Auth-Fail VLAN:</label>
        <input type="number" id="auth-fail-vlan" placeholder="e.g., 50">
      </div>
      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">Dynamic VLAN Assignment<span>+</span></div>
        <div class="accordion-content">
          <div class="checkbox-group"><label><input type="checkbox" id="enable-dynamic-vlan" checked> Enable Dynamic VLAN Assignment</label></div>
        </div>
      </div>
      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">Pre-Authentication ACL<span>+</span></div>
        <div class="accordion-content">
          <div class="checkbox-group"><label><input type="checkbox" id="enable-preauth-acl"> Configure Pre-Authentication ACL</label></div>
          <div id="preauth-acl-options" style="display: none;">
            <label for="preauth-acl-name">Pre-Auth ACL Name:</label>
            <input type="text" id="preauth-acl-name" placeholder="e.g., PREAUTH_ACL">
            <label for="preauth-acl-content">ACL Content:</label>
            <textarea id="preauth-acl-content" rows="5" placeholder="permit udp any any eq bootps\npermit udp any any eq domain"></textarea>
          </div>
        </div>
      </div>
      <div class="nav-buttons">
        <button type="button" onclick="goToStep(3)">Previous</button>
        <button type="button" onclick="goToStep(5)">Next</button>
      </div>
    </div>

    <!-- Step 5: Advanced Options -->
    <div class="step-content" id="step-5" style="display: none;">
      <h3>Step 5: Advanced Options</h3>
      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">Timers<span>+</span></div>
        <div class="accordion-content">
          <div class="row">
            <div class="col">
              <label for="reauth-period">Reauthentication Period (seconds):</label>
              <input type="number" id="reauth-period" value="3600">
            </div>
            <div class="col">
              <label for="timeout-period">Server Timeout (seconds):</label>
              <input type="number" id="timeout-period" value="30">
            </div>
          </div>
          <div class="row">
            <div class="col">
              <label for="tx-period">TX Period (seconds):</label>
              <input type="number" id="tx-period" value="5">
            </div>
            <div class="col">
              <label for="quiet-period">Quiet Period (seconds):</label>
              <input type="number" id="quiet-period" value="60">
            </div>
          </div>
        </div>
      </div>
      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">Interface Configuration<span>+</span></div>
        <div class="accordion-content">
          <label for="interfaces">Interfaces (comma-separated):</label>
          <input type="text" id="interfaces" placeholder="e.g., GigabitEthernet1/0/1">
          <div class="checkbox-group"><label><input type="checkbox" id="spanning-tree-portfast" checked> Enable Spanning Tree PortFast</label></div>
        </div>
      </div>
      <div class="nav-buttons">
        <button type="button" onclick="goToStep(4)">Previous</button>
        <button type="button" onclick="goToStep(6)">Next</button>
      </div>
    </div>

    <!-- Step 6: Configuration Preview -->
    <div class="step-content" id="step-6" style="display: none;">
      <h3>Step 6: Configuration Preview</h3>
      <div class="config-actions">
        <button type="button" onclick="generateConfiguration()">Generate</button>
        <button type="button" onclick="downloadConfiguration()">Download</button>
        <button type="button" onclick="copyConfiguration()">Copy to Clipboard</button>
      </div>
      <pre id="config-output" class="config-output"></pre>
      <p><strong>Disclaimer:</strong> Review and test configurations before production deployment.</p>
      <div class="nav-buttons">
        <button type="button" onclick="goToStep(5)">Previous</button>
      </div>
    </div>
  </div>

  <!-- AI Integration Tab -->
  <div class="tab-content" id="ai" style="display: none;">
    <h2>AI Integration</h2>
    <div class="form-group">
      <label for="ai-provider">AI Provider:</label>
      <select id="ai-provider">
        <option value="anthropic">Anthropic</option>
        <option value="deepseek">DeepSeek</option>
        <option value="openai">OpenAI</option>
      </select>
    </div>
    <div class="ai-chat-container">
      <div class="chat-history" id="chat-history"></div>
      <textarea id="ai-query" placeholder="Ask about your configuration..."></textarea>
      <button onclick="sendAIQuery()">Send</button>
    </div>
  </div>

  <!-- Reference Architecture Tab -->
  <div class="tab-content" id="reference" style="display: none;">
    <h2>Reference Architecture</h2>
    <div class="sub-tabs">
      <button class="sub-tab-btn active" onclick="showSubTab('reference', 'overview')">Overview</button>
      <button class="sub-tab-btn" onclick="showSubTab('reference', 'authentication')">Authentication Flow</button>
    </div>
    <div class="sub-tab-content active" id="reference-overview">
      <h3>Overview</h3>
      <p>802.1X and AAA architecture details...</p>
    </div>
    <div class="sub-tab-content" id="reference-authentication" style="display: none;">
      <h3>Authentication Flow</h3>
      <p>Details on authentication process...</p>
    </div>
  </div>

  <!-- Network Discovery Tab -->
  <div class="tab-content" id="discovery" style="display: none;">
    <h2>Network Discovery</h2>
    <div class="sub-tabs">
      <button class="sub-tab-btn active" onclick="showSubTab('discovery', 'scan')">Network Scan</button>
      <button class="sub-tab-btn" onclick="showSubTab('discovery', 'report')">Report</button>
      <button class="sub-tab-btn" onclick="showSubTab('discovery', 'resources')">Resources</button>
    </div>
    <div class="sub-tab-content active" id="discovery-scan">
      <h3>Network Scan</h3>
      <div class="accordion">
        <div class="accordion-header" onclick="toggleAccordion(this)">Portnox Prerequisites<span>+</span></div>
        <div class="accordion-content">
          <p><strong>Prerequisites:</strong> RADIUS server, 802.1X capable switches, EAP support.</p>
          <p><strong>Technical Validation:</strong> Deploy local RADIUS via Docker, validate CoA support.</p>
          <a href="https://docs.portnox.com" target="_blank">Portnox Documentation</a>
        </div>
      </div>
      <div class="form-group">
        <label for="scan-range">IP Range:</label>
        <input type="text" id="scan-range" placeholder="e.g., 10.1.1.0/24">
      </div>
    </div>
    <div class="sub-tab-content" id="discovery-report" style="display: none;">
      <h3>POC Report</h3>
      <p><strong>Use Case:</strong> Validate 802.1X for distributed enterprise.</p>
      <p><strong>Best Practice:</strong> Use monitoring mode for safe onboarding.</p>
      <p><strong>Timeline:</strong> 2-4 weeks for initial POC.</p>
    </div>
    <div class="sub-tab-content" id="discovery-resources" style="display: none;">
      <h3>POC Resources</h3>
      <p><strong>Templates:</strong> Available at <a href="https://docs.portnox.com" target="_blank">docs.portnox.com</a></p>
      <p><strong>Use Cases:</strong> Zero trust, IoT security, compliance.</p>
      <p><strong>Best Practices:</strong> MFA, dynamic segmentation, risk monitoring.</p>
      <p><strong>Timelines:</strong> 1-6 weeks depending on scope.</p>
      <p><strong>Technical Validations:</strong> Certificate auth, RADIUS integration.</p>
    </div>
  </div>

  <!-- Help Tab -->
  <div class="tab-content" id="discovery" style="display: none;">
    <h2>Help</h2>
    <p>Documentation and support resources...</p>
  </div>

  <script>
    // Tab and Step Management
    function showTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      document.querySelector(`.tab-btn[onclick*="${tabId}"]`).classList.add('active');
      if (tabId === 'configurator') goToStep(1);
      else if (tabId === 'reference' || tabId === 'discovery') showSubTab(tabId, `${tabId === 'reference' ? 'overview' : 'scan'}`);
    }

    function showSubTab(parentId, subTabId) {
      document.querySelectorAll(`#${parentId} .sub-tab-content`).forEach(tab => tab.style.display = 'none');
      document.querySelectorAll(`#${parentId} .sub-tab-btn`).forEach(btn => btn.classList.remove('active'));
      document.getElementById(`${parentId}-${subTabId}`).style.display = 'block';
      document.querySelector(`#${parentId} .sub-tab-btn[onclick*="${subTabId}"]`).classList.add('active');
    }

    function goToStep(step) {
      document.querySelectorAll('.step-content').forEach(content => content.style.display = 'none');
      document.querySelectorAll('.step').forEach(stepEl => stepEl.classList.remove('active'));
      document.getElementById(`step-${step}`).style.display = 'block';
      document.querySelector(`.step[data-step="${step}"]`).classList.add('active');
    }

    function showServerTab(tabId) {
      document.querySelectorAll('.server-tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-control-btn').forEach(btn => btn.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      document.querySelector(`.tab-control-btn[onclick*="${tabId}"]`).classList.add('active');
    }

    // Accordion Functionality
    function toggleAccordion(header) {
      const content = header.nextElementSibling;
      content.classList.toggle('active');
      header.querySelector('span').textContent = content.classList.contains('active') ? '-' : '+';
    }

    // Platform Options
    const platformOptions = {
      cisco: ['ios', 'ios-xe', 'nx-os', 'wlc'],
      aruba: ['aos-cx', 'aos-switch'],
      juniper: ['ex'],
      fortinet: ['fortiswitch'],
      arista: ['eos'],
      extreme: ['exos'],
      huawei: ['vrp'],
      alcatel: ['omniswitch'],
      ubiquiti: ['unifi'],
      hp: ['procurve'],
      dell: ['powerswitch'],
      netgear: ['managed'],
      ruckus: ['smartzone'],
      brocade: ['icx']
    };

    function updatePlatformOptions() {
      const vendor = document.getElementById('vendor-select').value;
      const platformSelect = document.getElementById('platform-select');
      platformSelect.innerHTML = platformOptions[vendor].map(opt => `<option value="${opt}">${opt.toUpperCase()}</option>`).join('');
    }
    updatePlatformOptions();

    // Configuration Generation (Simplified Example)
    function generateConfiguration() {
      const vendor = document.getElementById('vendor-select').value;
      const platform = document.getElementById('platform-select').value;
      const authMethod = document.getElementById('auth-method').value;
      const authMode = document.querySelector('input[name="auth_mode"]:checked').value;
      const hostMode = document.getElementById('host-mode').value;
      const dataVlan = document.getElementById('data-vlan').value;
      const voiceVlan = document.getElementById('voice-vlan').value || '';
      const guestVlan = document.getElementById('guest-vlan').value || '';
      const radiusIp1 = document.getElementById('radius-ip-1').value;
      const radiusKey1 = document.getElementById('radius-key-1').value;
      let config = `! Configuration for ${vendor} ${platform}\n`;
      if (vendor === 'cisco' && platform === 'nx-os') {
        config += `feature aaa\nfeature dot1x\nradius-server host ${radiusIp1} key ${radiusKey1}\n`;
        config += `interface Ethernet1/1\n switchport access vlan ${dataVlan}\n dot1x pae authenticator\n`;
        config += `${authMethod.includes('mab') ? 'dot1x mac-auth-bypass\n' : ''}`;
        config += `dot1x port-control ${authMode === 'closed' ? 'force-authorized' : 'auto'}\n`;
        if (guestVlan) config += `dot1x guest-vlan ${guestVlan}\n`;
      }
      document.getElementById('config-output').textContent = config;
    }

    function downloadConfiguration() {
      const config = document.getElementById('config-output').textContent;
      if (!config) return;
      const blob = new Blob([config], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'dot1xer_config.txt';
      a.click();
    }

    function copyConfiguration() {
      const config = document.getElementById('config-output').textContent;
      if (!config) return;
      navigator.clipboard.writeText(config);
    }

    // AI Integration (Simplified)
    function sendAIQuery() {
      const provider = document.getElementById('ai-provider').value;
      const query = document.getElementById('ai-query').value;
      const history = document.getElementById('chat-history');
      history.innerHTML += `<div class="user-message"><p>${query}</p></div>`;
      history.innerHTML += `<div class="ai-message"><p>${provider} response: Analyzing... (placeholder)</p></div>`;
      document.getElementById('ai-query').value = '';
    }
  </script>
</body>
</html>
