# Extreme EXOS 802.1X with MAB Configuration Template
# Generated by Dot1Xer Supreme
# Description: Standard configuration for 802.1X with MAB fallback on EXOS

# RADIUS Server Configuration
configure radius netlogin primary server <RADIUS_IP_PRIMARY> client-ip <SWITCH_IP> vr "VR-Default"
configure radius netlogin primary shared-secret <RADIUS_KEY_PRIMARY>
configure radius netlogin timeout 5
configure radius netlogin retries 3

# Add secondary RADIUS server if specified
configure radius netlogin secondary server <RADIUS_IP_SECONDARY> client-ip <SWITCH_IP> vr "VR-Default"
configure radius netlogin secondary shared-secret <RADIUS_KEY_SECONDARY>

# Enable RADIUS accounting
configure radius-accounting netlogin primary server <RADIUS_IP_PRIMARY> client-ip <SWITCH_IP> vr "VR-Default"
configure radius-accounting netlogin primary shared-secret <RADIUS_KEY_PRIMARY>

# Create VLANs
create vlan "auth_vlan" tag <DATA_VLAN>
create vlan "voice_vlan" tag <VOICE_VLAN>
create vlan "guest_vlan" tag <GUEST_VLAN>
create vlan "critical_vlan" tag <CRITICAL_VLAN>

# Configure NetLogin to use RADIUS
configure netlogin add mac-list default
enable netlogin dot1x
enable netlogin mac
configure netlogin mac authentication database radius
configure netlogin authentication protocol-order dot1x mac

# Configure auth failure VLAN
configure netlogin authentication failure vlan guest_vlan ports <INTERFACE>

# Configure Guest VLAN
configure netlogin guest-vlan guest_vlan ports <INTERFACE>

# Configure dot1x timers
configure netlogin dot1x timers reauth-period 7200
configure netlogin dot1x timers quiet-period 10
configure netlogin dot1x timers supp-response 30
configure netlogin dot1x timers server-timeout 30
configure netlogin dot1x timers auth-hold-period 60

# Configure authentication port mode
enable netlogin ports <INTERFACE> dot1x mac
configure netlogin ports <INTERFACE> mode mac-compatible
configure netlogin ports <INTERFACE> authentication mode multiple-host

# Configure port settings for voice
configure port <INTERFACE> voice vlan voice_vlan

# End of configuration
