# Juniper EX Series 802.1X with MAB Configuration Template
# Generated by Dot1Xer Supreme
# Description: Standard configuration for 802.1X with MAB fallback on Juniper EX

# RADIUS Server Configuration
system {
    radius-server {
        <RADIUS_IP_PRIMARY> {
            port 1812;
            accounting-port 1813;
            secret "<RADIUS_KEY_PRIMARY>";
            retry 3;
            timeout 5;
        }
        <RADIUS_IP_SECONDARY> {
            port 1812;
            accounting-port 1813;
            secret "<RADIUS_KEY_SECONDARY>";
            retry 3;
            timeout 5;
        }
    }
}

# Access Profile Configuration
access {
    profile dot1x-profile {
        authentication-order [ dot1x mac-radius ];
        radius {
            authentication-server [ <RADIUS_IP_PRIMARY> <RADIUS_IP_SECONDARY> ];
            accounting-server [ <RADIUS_IP_PRIMARY> <RADIUS_IP_SECONDARY> ];
            options {
                revert-interval 300;
            }
        }
        accounting {
            order radius;
            accounting-stop-on-failure;
            accounting-stop-on-access-deny;
        }
    }
}

# VLAN Configuration
vlans {
    data-vlan {
        vlan-id <DATA_VLAN>;
    }
    voice-vlan {
        vlan-id <VOICE_VLAN>;
    }
    guest-vlan {
        vlan-id <GUEST_VLAN>;
    }
    critical-vlan {
        vlan-id <CRITICAL_VLAN>;
    }
}

# 802.1X Protocol Configuration
protocols {
    dot1x {
        authenticator {
            authentication-profile-name dot1x-profile;
            interface {
                <INTERFACE> {
                    supplicant multiple;
                    transmit-period 5;
                    mac-radius {
                        restrict;
                    }
                    reauthentication 7200;
                    guest-vlan <GUEST_VLAN>;
                    server-fail vlan-name <CRITICAL_VLAN>;
                    server-reject-vlan <GUEST_VLAN>;
                    eapol-block;
                }
            }
        }
    }
}

# Interface Configuration
interfaces {
    <INTERFACE> {
        unit 0 {
            family ethernet-switching {
                port-mode access;
                vlan {
                    members <DATA_VLAN>;
                }
                voip {
                    vlan <VOICE_VLAN>;
                }
            }
        }
    }
}

# End of Configuration
