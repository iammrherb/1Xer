! Aruba AOS-CX 802.1X with MAB Configuration Template
! Generated by Dot1Xer Supreme
! Description: Standard configuration for 802.1X with MAB fallback on AOS-CX

! RADIUS Server Configuration
radius-server host <RADIUS_IP_PRIMARY> key <RADIUS_KEY_PRIMARY>
radius-server host <RADIUS_IP_SECONDARY> key <RADIUS_KEY_SECONDARY>

! 802.1X Configuration
aaa authentication port-access dot1x authenticator
aaa authentication port-access dot1x authenticator cached-reauth
aaa authentication port-access dot1x authenticator reauthentication
aaa authentication port-access dot1x authenticator timeout quiet-period 10
aaa authentication port-access dot1x authenticator timeout reauth-period 7200
aaa authentication port-access dot1x authenticator timeout supp-timeout 30
aaa authentication port-access dot1x authenticator timeout server-timeout 30
aaa authentication port-access dot1x authenticator max-retries 3
aaa authentication port-access dot1x authenticator max-requests 3

! MAC Authentication Configuration
aaa authentication port-access mac-auth
aaa authentication port-access mac-auth cache-mode
aaa authentication port-access mac-auth cache-timeout 14400
aaa authentication port-access mac-auth max-retries 3
aaa authentication port-access mac-auth timeout quiet-period 10
aaa authentication port-access mac-auth timeout server-timeout 30
aaa authentication port-access mac-auth timeout reauth-period 7200

! VLAN Configuration
vlan <DATA_VLAN>
    name "AUTH_VLAN"
vlan <VOICE_VLAN>
    name "VOICE_VLAN"
vlan <GUEST_VLAN>
    name "GUEST_VLAN"
vlan <CRITICAL_VLAN>
    name "CRITICAL_VLAN"

! Interface Configuration
interface <INTERFACE>
    description "802.1X Authentication Port"
    no shutdown
    aaa authentication port-access dot1x authenticator
    aaa authentication port-access dot1x authenticator logoff-period 300
    aaa authentication port-access dot1x authenticator client-limit 5
    aaa authentication port-access mac-auth
    aaa authentication port-access mac-auth addr-format no-delimiter uppercase
    aaa authentication port-access authenticator active
    aaa authentication port-access authenticator critical-auth
    aaa authentication port-access authenticator auth-priority dot1x mac-auth
    aaa authentication port-access authenticator reauth-period 7200
    aaa port-access role-based unauth-role <GUEST_VLAN>
    aaa port-access role-based auth-role <DATA_VLAN>
    aaa port-access role-based critical-role <CRITICAL_VLAN>
    aaa port-access role-based voice-role <VOICE_VLAN>
    spanning-tree port-type admin-edge
    spanning-tree bpdu-protection

! End of Configuration
